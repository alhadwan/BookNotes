<%- include("partials/header.ejs") %>   
<div class="container py-5">
  <main class="row justify-content-center">
    <% if (locals.book && book.length > 0) { %>
      <% book.forEach((post) => { %>
        <div class="col-md-10 mb-5">
          <div class="card shadow rounded-4">
            <div class="row g-0">
              <div class="col-md-4 d-flex align-items-center justify-content-center p-3">
                <img 
                  src="https://covers.openlibrary.org/b/isbn/<%= post.isbn %>-M.jpg" 
                  class="img-fluid rounded" 
                  alt="Book Cover"
                  style="max-height: 300px; object-fit: contain;"
                />
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h3 class="card-title"><%= post.title %></h3>
                  <p class="card-text"><strong>Notes:</strong> <%= post.notes %></p>
                  <p class="card-text mb-1"><strong>Rating:</strong> <%= post.rating %> ‚≠ê</p>
                  <p class="card-text mb-1"><strong>Read on:</strong> <%= post.read_date.toDateString() %></p>
                  <p class="card-text mb-3"><strong>ISBN:</strong> <%= post.isbn %></p>
                  <div class="d-flex gap-2">
                    <a href="/edit/<%= post.id %>" class="btn btn-outline-primary">Edit</a>
                    <form action="/delete/<%= post.id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this book?');">
                      <button type="submit" class="btn btn-outline-danger">Delete</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% }); %>
    <% } else { %>
      <div class="col-md-8 text-center">
        <p class="fs-4 text-muted">No books found.</p>
      </div>
    <% } %>
  </main>
</div>
<%- include("partials/footer.ejs") %>